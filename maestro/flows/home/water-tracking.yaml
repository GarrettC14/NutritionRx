appId: com.nutritionrx.app
name: Water Tracking
tags:
  - home
  - water
---
- launchApp:
    clearState: true
- runFlow: ../../utils/complete-onboarding.yaml

- assertVisible:
    id: "home-screen"

# Wait for skeleton to dismiss (home-date-label only renders after isReady)
- extendedWaitUntil:
    visible:
      id: "home-date-label"
    timeout: 8000

# Water tracker is at position 2 in the DraggableFlatList (after nutrition_overview and quick_add)
# It's just barely below the initial viewport edge. Standard swipes scroll too far.
# Use a small partial swipe (10% of screen height) to nudge it into view.
- swipe:
    start: "50%, 60%"
    end: "50%, 45%"
    duration: 500

- waitForAnimationToEnd

- extendedWaitUntil:
    visible:
      id: "widget-water-tracker"
    timeout: 10000

# Add water (the widget only has an add button â€” no remove or glass indicators)
- tapOn:
    id: "water-add-button"

- waitForAnimationToEnd

# Add another glass
- tapOn:
    id: "water-add-button"

- waitForAnimationToEnd

# Verify widget is still visible after interactions
- assertVisible:
    id: "widget-water-tracker"
