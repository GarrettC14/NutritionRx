appId: com.nutritionrx.app
name: Widget Management
tags:
  - home
  - widgets
---
- launchApp:
    clearState: true
- runFlow: ../../utils/complete-onboarding.yaml

- assertVisible:
    id: "home-screen"

# Enter edit mode
- tapOn:
    id: "home-edit-button"

- waitForAnimationToEnd

# Verify edit mode elements
- assertVisible:
    id: "home-restore-button"
- assertVisible:
    id: "home-add-widget-button"

# Open widget picker
- tapOn:
    id: "home-add-widget-button"

- extendedWaitUntil:
    visible:
      id: "home-widget-picker-modal"
    timeout: 2000

# Close picker
- swipe:
    direction: DOWN
    duration: 500

# Restore default layout
- tapOn:
    id: "home-restore-button"

- waitForAnimationToEnd

# Exit edit mode (tap edit button again or tap outside)
- tapOn:
    id: "home-edit-button"
    optional: true
