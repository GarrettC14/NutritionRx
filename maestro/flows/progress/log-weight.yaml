appId: com.nutritionrx.app
name: Log Weight
tags:
  - progress
  - weight
---
- launchApp:
    clearState: true
- runFlow: ../../utils/complete-onboarding.yaml

- tapOn:
    id: "tab-bar-progress"

- extendedWaitUntil:
    visible:
      id: "progress-screen"
    timeout: 20000

# Wait for content to load (button only appears after skeleton dismisses)
- extendedWaitUntil:
    visible:
      id: "progress-log-weight-button"
    timeout: 15000

- tapOn:
    id: "progress-log-weight-button"

- extendedWaitUntil:
    visible:
      id: "log-weight-screen"
    timeout: 5000

# Verify elements
- assertVisible:
    id: "log-weight-close-button"
- assertVisible:
    id: "log-weight-minus-button"
- assertVisible:
    id: "log-weight-input"
- assertVisible:
    id: "log-weight-plus-button"
- assertVisible:
    id: "log-weight-notes-input"
- assertVisible:
    id: "log-weight-save-button"

# Quick adjust buttons
- assertVisible:
    id: "log-weight-quick-minus-1"
- assertVisible:
    id: "log-weight-quick-minus-05"
- assertVisible:
    id: "log-weight-quick-plus-05"
- assertVisible:
    id: "log-weight-quick-plus-1"

# Dismiss keyboard from autoFocus before tapping quick adjust buttons
- hideKeyboard

# Use quick adjust buttons instead of manual text entry (avoids Android autoFocus + decimal-pad issues)
- tapOn:
    id: "log-weight-quick-plus-1"

- tapOn:
    id: "log-weight-quick-minus-05"

# Add notes
- tapOn:
    id: "log-weight-notes-input"
- inputText: "Morning weigh-in"

- hideKeyboard

# Save
- tapOn:
    id: "log-weight-save-button"

- waitForAnimationToEnd

- extendedWaitUntil:
    visible:
      id: "progress-screen"
    timeout: 15000

# Verify chart updated (may need a moment to re-render with new data)
- extendedWaitUntil:
    visible:
      id: "progress-weight-chart"
    timeout: 5000
