appId: com.nutritionrx.app
name: Goals Settings
tags:
  - settings
  - goals
---
- launchApp:
    clearState: true
- runFlow: ../../utils/complete-onboarding.yaml

- tapOn:
    id: "tab-bar-settings"

- extendedWaitUntil:
    visible:
      id: "settings-screen"
    timeout: 3000

- scrollUntilVisible:
    element:
      id: "settings-goals-row"
    direction: DOWN
    timeout: 5000

- tapOn:
    id: "settings-goals-row"

- extendedWaitUntil:
    visible:
      id: "settings-goals-screen"
    timeout: 3000

# Verify read-only view elements (goal already set during onboarding)
- assertVisible:
    id: "settings-goals-back-button"
- assertVisible:
    id: "settings-goals-edit-button"

# Enable editing to see goal type options
- tapOn:
    id: "settings-goals-edit-button"

- waitForAnimationToEnd

# Now verify goal type options
- assertVisible:
    id: "settings-goals-goal-lose"
- assertVisible:
    id: "settings-goals-goal-maintain"
- assertVisible:
    id: "settings-goals-goal-gain"

# Change goal
- tapOn:
    id: "settings-goals-goal-maintain"

# Save
- tapOn:
    id: "settings-goals-save-button"

- waitForAnimationToEnd

- tapOn:
    id: "settings-goals-back-button"

- assertVisible:
    id: "settings-screen"
