appId: com.nutritionrx.app
name: Health Connect Activity Explainer
tags:
  - health
  - health-connect
  - explainer
---
# Note: This test assumes Health Connect is already connected
- launchApp:
    clearState: true
- runFlow: ../../utils/complete-onboarding.yaml

# Navigate to Settings tab
- tapOn:
    id: "tab-bar-settings"

- extendedWaitUntil:
    visible:
      id: "settings-screen"
    timeout: 5000

# Scroll to find Health Connect row
- scrollUntilVisible:
    element:
      id: "settings-health-connect-row"
    direction: DOWN
    timeout: 10000

- tapOn:
    id: "settings-health-connect-row"

- extendedWaitUntil:
    visible:
      id: "settings-health-connect-screen"
    timeout: 5000

# Only run explainer test if connected (How this works button visible)
- runFlow:
    when:
      visible:
        id: "settings-health-connect-how-this-works-button"
    commands:
      - tapOn:
          id: "settings-health-connect-how-this-works-button"
      - waitForAnimationToEnd
      - assertVisible:
          id: "settings-health-connect-explainer-modal-title"
      - assertVisible:
          id: "settings-health-connect-explainer-modal-got-it"
      - tapOn:
          id: "settings-health-connect-explainer-modal-got-it"
      - waitForAnimationToEnd
      - assertNotVisible:
          id: "settings-health-connect-explainer-modal-title"
