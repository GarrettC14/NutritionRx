appId: com.nutritionrx.app
name: Health Connect Info and Navigation
tags:
  - health
  - health-connect
  - navigation
---
- launchApp:
    clearState: true
- runFlow: ../../utils/complete-onboarding.yaml

# Navigate to Settings tab
- tapOn:
    id: "tab-bar-settings"

- extendedWaitUntil:
    visible:
      id: "settings-screen"
    timeout: 5000

# Scroll to find Health Connect row
- scrollUntilVisible:
    element:
      id: "settings-health-connect-row"
    direction: DOWN
    timeout: 10000

- tapOn:
    id: "settings-health-connect-row"

- extendedWaitUntil:
    visible:
      id: "settings-health-connect-screen"
    timeout: 5000

# Privacy notice and help section are only visible when connected
- runFlow:
    when:
      visible:
        id: "settings-health-connect-privacy-notice"
    commands:
      - assertVisible:
          id: "settings-health-connect-privacy-notice"
      - scrollUntilVisible:
          element:
            id: "settings-health-connect-help-section"
          direction: DOWN
          timeout: 5000
      - assertVisible:
          id: "settings-health-connect-help-section"

# Test back navigation
- tapOn:
    id: "settings-health-connect-back-button"

- extendedWaitUntil:
    visible:
      id: "settings-screen"
    timeout: 5000

- assertVisible:
    id: "settings-screen"
