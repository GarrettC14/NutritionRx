appId: com.nutritionrx.app
name: Full Onboarding Flow
tags:
  - onboarding
  - complete
---
- launchApp:
    clearState: true

- extendedWaitUntil:
    visible:
      id: "legal-screen"
    timeout: 30000

# === Legal ===
- assertVisible:
    id: "legal-screen"

# Checkbox and button are in a fixed bottom section (no scroll required)
- waitForAnimationToEnd

- tapOn:
    id: "legal-checkbox"

- waitForAnimationToEnd

- tapOn:
    id: "legal-proceed-button"

# === Screen 1: Goal Selection ===
- extendedWaitUntil:
    visible:
      id: "onboarding-goal-screen"
    timeout: 5000

# Verify all goal options
- assertVisible:
    id: "onboarding-goal-option-lose"
- assertVisible:
    id: "onboarding-goal-option-maintain"
- assertVisible:
    id: "onboarding-goal-option-build"
- assertVisible:
    id: "onboarding-goal-option-track"

# Select "Lose weight"
- tapOn:
    id: "onboarding-goal-option-lose"

- tapOn:
    id: "onboarding-goal-continue-button"

# === Screen 2: About You ===
- extendedWaitUntil:
    visible:
      id: "onboarding-about-you-screen"
    timeout: 5000

- assertVisible:
    id: "onboarding-about-you-back-button"

- tapOn:
    id: "onboarding-sex-male"

- tapOn:
    id: "onboarding-dob"

# Confirm default date
- tapOn:
    text: "Done"
    optional: true

- tapOn:
    id: "onboarding-about-you-continue-button"

# === Screen 3: Body Stats ===
- extendedWaitUntil:
    visible:
      id: "onboarding-body-stats-screen"
    timeout: 5000

- assertVisible:
    id: "onboarding-body-stats-back-button"

# Height: ft/in mode â€” feet field has testID, maxLength=1
- tapOn:
    id: "onboarding-height"
- inputText: "5"

# Dismiss keyboard so weight field is visible
- hideKeyboard

- tapOn:
    id: "onboarding-weight"
- inputText: "180"

- tapOn:
    id: "onboarding-body-stats-continue-button"

# === Screen 4: Activity Level ===
- extendedWaitUntil:
    visible:
      id: "onboarding-activity-screen"
    timeout: 5000

- assertVisible:
    id: "onboarding-activity-back-button"

# Verify activity options
- assertVisible:
    id: "onboarding-activity-sedentary"
- assertVisible:
    id: "onboarding-activity-lightly"
- assertVisible:
    id: "onboarding-activity-moderately"
- assertVisible:
    id: "onboarding-activity-very"
- assertVisible:
    id: "onboarding-activity-extremely"

# moderately_active is pre-selected, just continue
- tapOn:
    id: "onboarding-activity-continue-button"

# === Screen 5: Eating Style ===
- extendedWaitUntil:
    visible:
      id: "onboarding-eating-style-screen"
    timeout: 5000

- assertVisible:
    id: "onboarding-eating-style-back-button"

# flexible is pre-selected, just continue
- tapOn:
    id: "onboarding-eating-style-continue-button"

# === Screen 6: Protein Priority ===
- extendedWaitUntil:
    visible:
      id: "onboarding-protein-screen"
    timeout: 5000

- assertVisible:
    id: "onboarding-protein-back-button"

# standard is pre-selected, just continue
- tapOn:
    id: "onboarding-protein-continue-button"

# === Screen 7: Target (shown for 'lose' goal) ===
- extendedWaitUntil:
    visible:
      id: "onboarding-target-screen"
    timeout: 5000

- assertVisible:
    id: "onboarding-target-back-button"

- tapOn:
    id: "onboarding-target-weight"
- inputText: "160"

# moderate rate is pre-selected, just continue
- tapOn:
    id: "onboarding-target-continue-button"

# === Screen 8: Your Plan ===
- extendedWaitUntil:
    visible:
      id: "onboarding-your-plan-screen"
    timeout: 5000

- assertVisible:
    id: "onboarding-your-plan-back-button"

- tapOn:
    id: "onboarding-start-tracking"

# === Home Screen ===
# The edit tooltip modal may appear on top, blocking home-screen testID.
# Wait for and dismiss the tooltip first.
- extendedWaitUntil:
    visible:
      text: "Got it!"
    timeout: 15000

- tapOn:
    text: "Got it!"

- extendedWaitUntil:
    visible:
      id: "home-screen"
    timeout: 5000

# Wait for skeleton to dismiss
- extendedWaitUntil:
    visible:
      id: "home-date-label"
    timeout: 8000
