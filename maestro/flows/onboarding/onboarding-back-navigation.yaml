appId: com.nutritionrx.app
name: Onboarding Back Navigation
tags:
  - onboarding
  - navigation
---
- launchApp:
    clearState: true

- extendedWaitUntil:
    visible:
      id: "legal-screen"
    timeout: 30000

# Swipe to scroll to bottom (triggers onScroll events for hasScrolledToBottom)
- swipe:
    direction: UP
    duration: 500
- swipe:
    direction: UP
    duration: 500
- swipe:
    direction: UP
    duration: 500
- swipe:
    direction: UP
    duration: 500

# Wait for scroll-to-bottom detection
- extendedWaitUntil:
    visible:
      id: "legal-scroll-complete"
    timeout: 3000

- tapOn:
    id: "legal-checkbox"

- tapOn:
    id: "legal-proceed-button"

# Welcome → Goal
- extendedWaitUntil:
    visible:
      id: "onboarding-welcome-screen"
    timeout: 5000

- tapOn:
    id: "onboarding-begin-button"

- assertVisible:
    id: "onboarding-goal-screen"

# Goal → Preferences
- tapOn:
    id: "onboarding-goal-option-maintain"

- tapOn:
    id: "onboarding-goal-continue-button"

- assertVisible:
    id: "onboarding-preferences-screen"

# Go back to Goal
- tapOn:
    id: "onboarding-preferences-back-button"

- assertVisible:
    id: "onboarding-goal-screen"

# Previous selection should be preserved
- tapOn:
    id: "onboarding-goal-continue-button"

- assertVisible:
    id: "onboarding-preferences-screen"

# Continue to Ready
- tapOn:
    id: "onboarding-energy-calories"
- tapOn:
    id: "onboarding-weight-kg"

- tapOn:
    id: "onboarding-preferences-continue-button"

- assertVisible:
    id: "onboarding-ready-screen"

# Go back to Preferences
- tapOn:
    id: "onboarding-ready-back-button"

- assertVisible:
    id: "onboarding-preferences-screen"
