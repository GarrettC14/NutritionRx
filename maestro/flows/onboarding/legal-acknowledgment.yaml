appId: com.nutritionrx.app
name: Legal Acknowledgment Flow
tags:
  - onboarding
  - legal
---
- runFlow: ../../utils/launch-app.yaml
- runFlow: ../../utils/reset-app.yaml

- extendedWaitUntil:
    visible:
      id: "legal-screen"
    timeout: 5000

- assertVisible:
    id: "legal-screen"

# Verify all elements present
- assertVisible:
    id: "legal-scroll-view"
- assertVisible:
    id: "legal-terms-link"

# Try to proceed without checking - should be disabled or show error
- tapOn:
    point: "93%, 93%"
    optional: true
- tapOn:
    id: "legal-proceed-button"

# Should still be on legal screen (button disabled without checkbox)
- assertVisible:
    id: "legal-screen"

# Now properly acknowledge
- scrollUntilVisible:
    element:
      id: "legal-checkbox"
    direction: DOWN

- tapOn:
    id: "legal-checkbox"

- tapOn:
    point: "93%, 93%"
    optional: true
- tapOn:
    id: "legal-proceed-button"

# Should move to onboarding
- extendedWaitUntil:
    visible:
      id: "onboarding-welcome-screen"
    timeout: 3000
