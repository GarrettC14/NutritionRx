appId: com.nutritionrx.app
name: Create Custom Food
tags:
  - food-logging
  - custom-food
---
- launchApp:
    clearState: true
- runFlow: ../../utils/complete-onboarding.yaml

# Navigate to add-food via Food tab
- tapOn:
    id: "tab-bar-food"

- extendedWaitUntil:
    visible:
      id: "add-food-screen"
    timeout: 5000

- tapOn:
    id: "add-food-create-food-button"

- extendedWaitUntil:
    visible:
      id: "create-food-screen"
    timeout: 5000

# Verify top elements (above the fold)
- assertVisible:
    id: "create-food-back-button"
- assertVisible:
    id: "create-food-name-input"

# Fill in custom food details
- tapOn:
    id: "create-food-name-input"
- inputText: "Grandma's Meatloaf"

- tapOn:
    id: "create-food-brand-input"
- inputText: "Homemade"

- hideKeyboard

# Scroll to serving inputs which may be below keyboard/fold
- scrollUntilVisible:
    element:
      id: "create-food-serving-amount-input"
    direction: DOWN

- tapOn:
    id: "create-food-serving-amount-input"
- inputText: "1"

- tapOn:
    id: "create-food-serving-unit-input"
- inputText: "slice"

- hideKeyboard

# Scroll to reveal calorie/macro inputs (may be below fold)
- scrollUntilVisible:
    element:
      id: "create-food-calories-input"
    direction: DOWN

- tapOn:
    id: "create-food-calories-input"
- inputText: "280"

- hideKeyboard

# Scroll to macro inputs (below fold when keyboard was up)
- scrollUntilVisible:
    element:
      id: "create-food-protein-input"
    direction: DOWN

- tapOn:
    id: "create-food-protein-input"
- inputText: "22"

- hideKeyboard

- scrollUntilVisible:
    element:
      id: "create-food-carbs-input"
    direction: DOWN

- tapOn:
    id: "create-food-carbs-input"
- inputText: "12"

- hideKeyboard

- scrollUntilVisible:
    element:
      id: "create-food-fat-input"
    direction: DOWN

- tapOn:
    id: "create-food-fat-input"
- inputText: "16"

- hideKeyboard

# Scroll to create button
- scrollUntilVisible:
    element:
      id: "create-food-create-button"
    direction: DOWN

- tapOn:
    id: "create-food-create-button"

# After creation, router.dismiss() returns to add-food screen
- extendedWaitUntil:
    visible:
      id: "add-food-screen"
    timeout: 8000
