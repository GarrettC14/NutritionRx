appId: com.nutritionrx.app
name: Favorite Food Flow
tags:
  - food-logging
  - favorites
---
- runFlow: ../../utils/launch-app.yaml

- runFlow:
    file: ../../utils/complete-onboarding.yaml
    when:
      visible:
        id: "legal-screen"

- runFlow: ../../utils/seed-data.yaml

- tapOn:
    id: "meal-add-food-button-breakfast"

- extendedWaitUntil:
    visible:
      id: "add-food-screen"
    timeout: 3000

# Search for a food
- tapOn:
    id: "add-food-search-input"
- inputText: "apple"

- waitForAnimationToEnd

# Select a result
- tapOn:
    id: "add-food-search-result-item-.*"
    index: 0

- assertVisible:
    id: "log-food-screen"

# Favorite the food
- tapOn:
    id: "log-food-favorite-button"

- waitForAnimationToEnd

# Add to log
- tapOn:
    id: "log-food-add-button"

- extendedWaitUntil:
    visible:
      id: "home-screen"
    timeout: 3000

# Go back to add food and check favorites
- tapOn:
    id: "meal-add-food-button-lunch"

- extendedWaitUntil:
    visible:
      id: "add-food-screen"
    timeout: 3000

# Verify favorites section exists
- assertVisible:
    id: "add-food-favorites-section"
