appId: com.nutritionrx.app
name: Paywall Flow
tags:
  - premium
  - paywall
---
- runFlow: ../../utils/launch-app.yaml

- runFlow:
    file: ../../utils/complete-onboarding.yaml
    when:
      visible:
        id: "legal-screen"

- tapOn:
    point: "93%, 93%"
    optional: true
- tapOn:
    id: "tab-bar-settings"

# Try to access premium feature
- tapOn:
    id: "settings-premium-row"

- extendedWaitUntil:
    visible:
      id: "paywall-screen"
    timeout: 3000

# Verify paywall elements
- assertVisible:
    id: "paywall-close-button"
- assertVisible:
    id: "paywall-subscribe-button"
- assertVisible:
    id: "paywall-restore-button"
- assertVisible:
    id: "paywall-terms-link"
- assertVisible:
    id: "paywall-privacy-link"

# Close paywall
- tapOn:
    id: "paywall-close-button"

- assertVisible:
    id: "settings-screen"
