appId: com.nutritionrx.app
name: Critical Path Smoke Test
tags:
  - smoke
  - critical
---
# ============================================
# CRITICAL PATH: Launch → Onboard → Log Food → Verify
# ============================================

# --- STEP 1: Launch fresh ---
- launchApp:
    clearState: true

# --- STEP 2: Complete onboarding ---
- runFlow: ../utils/complete-onboarding.yaml

# --- STEP 3: Verify Home Screen ---
- assertVisible:
    id: "home-screen"

- scrollUntilVisible:
    element:
      id: "home-date-label"
    direction: UP
    timeout: 5000

# --- STEP 4: Log Food via Quick Add ---
- openLink: "nutritionrx:///add-food/quick?mealType=breakfast"

- extendedWaitUntil:
    visible:
      id: "quick-add-screen"
    timeout: 5000

- tapOn:
    id: "quick-add-calories-input"
- inputText: "350"

- tapOn:
    id: "quick-add-protein-input"
- inputText: "25"

- tapOn:
    id: "quick-add-carbs-input"
- inputText: "30"

- tapOn:
    id: "quick-add-fat-input"
- inputText: "12"

- hideKeyboard

- tapOn:
    id: "quick-add-add-button"

# --- STEP 5: Navigate back to Home and verify ---
- extendedWaitUntil:
    notVisible:
      id: "quick-add-screen"
    timeout: 5000

- tapOn:
    id: "tab-bar-home"

- extendedWaitUntil:
    visible:
      id: "home-screen"
    timeout: 5000

- scrollUntilVisible:
    element:
      id: "home-date-label"
    direction: UP
    timeout: 5000

- assertVisible:
    id: "home-date-label"

# --- SMOKE TEST COMPLETE ---
