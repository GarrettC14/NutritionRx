appId: com.nutritionrx.app
name: Critical Path Smoke Test
tags:
  - smoke
  - critical
---
# ============================================
# CRITICAL PATH: Home Screen → Log Food → Verify
# ============================================
# Note: For Expo dev builds, use openLink to launch
# the app through the dev client. Do NOT use clearState
# as it breaks the native module registry.

# --- STEP 1: Launch app via Expo dev client ---
- openLink: "nutritionrx://expo-development-client/?url=http%3A%2F%2Flocalhost%3A8082"

# Wait for the app to fully load
- extendedWaitUntil:
    visible:
      id: "home-screen"
    timeout: 20000

# --- STEP 2: Verify Home Screen ---
- assertVisible:
    id: "home-date-label"

# --- STEP 3: Log Food via Quick Add ---
- tapOn:
    id: "meal-add-food-button-breakfast"

- extendedWaitUntil:
    visible:
      id: "add-food-screen"
    timeout: 5000

# Use Quick Add for simplicity
- scrollUntilVisible:
    element:
      text: "Quick Add"
    direction: DOWN

- tapOn:
    text: "Quick Add"

- extendedWaitUntil:
    visible:
      id: "quick-add-screen"
    timeout: 3000

- tapOn:
    id: "quick-add-calories-input"
- inputText: "350"

- tapOn:
    id: "quick-add-protein-input"
- inputText: "25"

- tapOn:
    id: "quick-add-carbs-input"
- inputText: "30"

- tapOn:
    id: "quick-add-fat-input"
- inputText: "12"

- hideKeyboard

- tapOn:
    id: "quick-add-add-button"

# --- STEP 4: Verify Entry on Home ---
- extendedWaitUntil:
    visible:
      id: "home-screen"
    timeout: 5000

# Verify calorie ring updated (or meal section has entry)
- assertVisible:
    id: "widget-calorie-ring"

# --- SMOKE TEST COMPLETE ---
