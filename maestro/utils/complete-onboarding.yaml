appId: com.nutritionrx.app
name: Complete Onboarding Utility
---
# Starts from fresh install, ends on Home screen
# Note: LogBox warnings are suppressed via LogBox.ignoreAllLogs() in _layout.tsx

# Dismiss any stale system dialogs (e.g. "Open in NutritionRx?" from deep links)
- tapOn:
    text: "Cancel"
    optional: true

# Wait for JS bundle to load from Metro (can take 20-30s after clearState)
- extendedWaitUntil:
    visible:
      id: "legal-screen"
    timeout: 30000

# Legal Acknowledgment — swipe to scroll to bottom (triggers onScroll events)
- swipe:
    direction: UP
    duration: 500
- swipe:
    direction: UP
    duration: 500
- swipe:
    direction: UP
    duration: 500
- swipe:
    direction: UP
    duration: 500

# Wait for scroll-to-bottom detection to enable the checkbox
- extendedWaitUntil:
    visible:
      id: "legal-scroll-complete"
    timeout: 3000

- tapOn:
    id: "legal-checkbox"

- tapOn:
    id: "legal-proceed-button"

# Goal Selection (app goes directly from legal to goal — no welcome screen)
- extendedWaitUntil:
    visible:
      id: "onboarding-goal-screen"
    timeout: 5000

- tapOn:
    id: "onboarding-goal-option-lose"

- tapOn:
    id: "onboarding-goal-continue-button"

# Preferences
- assertVisible:
    id: "onboarding-preferences-screen"

- tapOn:
    id: "onboarding-energy-calories"

- tapOn:
    id: "onboarding-weight-lbs"

- tapOn:
    id: "onboarding-preferences-continue-button"

# Ready Screen
- assertVisible:
    id: "onboarding-ready-screen"

- tapOn:
    id: "onboarding-ready-explore-app"

# Verify Home
- extendedWaitUntil:
    visible:
      id: "home-screen"
    timeout: 5000
