appId: com.nutritionrx.app
name: Complete Onboarding Utility
---
# Starts from fresh install, ends on Home screen
# 9-screen flow: goal → about-you → body-stats → activity → experience → eating-style → protein → target → your-plan
# Note: LogBox warnings are suppressed via LogBox.ignoreAllLogs() in _layout.tsx

# Dismiss any stale system dialogs (e.g. "Open in NutritionRx?" from deep links)
- tapOn:
    text: "Cancel"
    optional: true

# Wait for JS bundle to load from Metro (can take 20-30s after clearState)
- extendedWaitUntil:
    visible:
      id: "legal-screen"
    timeout: 30000

# Checkbox and button are in a fixed bottom section (no scroll required)
- waitForAnimationToEnd

- tapOn:
    id: "legal-checkbox"

- waitForAnimationToEnd

- tapOn:
    id: "legal-proceed-button"

# Screen 1: Goal Selection
- extendedWaitUntil:
    visible:
      id: "onboarding-goal-screen"
    timeout: 5000

- tapOn:
    id: "onboarding-goal-option-lose"

- tapOn:
    id: "onboarding-goal-continue-button"

# Screen 2: About You
- extendedWaitUntil:
    visible:
      id: "onboarding-about-you-screen"
    timeout: 5000

- tapOn:
    id: "onboarding-sex-male"

- tapOn:
    id: "onboarding-dob"

# Select a date of birth (will open date picker, confirm default)
- tapOn:
    text: "Done"
    optional: true

- tapOn:
    id: "onboarding-about-you-continue-button"

# Screen 3: Body Stats
- extendedWaitUntil:
    visible:
      id: "onboarding-body-stats-screen"
    timeout: 5000

# Height: ft/in mode — feet field has testID, maxLength=1
- tapOn:
    id: "onboarding-height"
- inputText: "5"

# Dismiss keyboard so weight field is visible
- hideKeyboard

- tapOn:
    id: "onboarding-weight"
- inputText: "180"

- tapOn:
    id: "onboarding-body-stats-continue-button"

# Screen 4: Activity Level
- extendedWaitUntil:
    visible:
      id: "onboarding-activity-screen"
    timeout: 5000

# moderately_active is pre-selected, just continue
- tapOn:
    id: "onboarding-activity-continue-button"

# Screen 5: Experience Level
- extendedWaitUntil:
    visible:
      id: "onboarding-experience-screen"
    timeout: 5000

# intermediate is pre-selected, just continue
- tapOn:
    id: "onboarding-experience-continue-button"

# Screen 6: Eating Style
- extendedWaitUntil:
    visible:
      id: "onboarding-eating-style-screen"
    timeout: 5000

# flexible is pre-selected, just continue
- tapOn:
    id: "onboarding-eating-style-continue-button"

# Screen 7: Protein Priority
- extendedWaitUntil:
    visible:
      id: "onboarding-protein-screen"
    timeout: 5000

# standard is pre-selected, just continue
- tapOn:
    id: "onboarding-protein-continue-button"

# Screen 8: Target (shown for 'lose' goal)
- extendedWaitUntil:
    visible:
      id: "onboarding-target-screen"
    timeout: 5000

- tapOn:
    id: "onboarding-target-weight"
- inputText: "160"

# moderate rate is pre-selected, just continue
- tapOn:
    id: "onboarding-target-continue-button"

# Screen 9: Your Plan
- extendedWaitUntil:
    visible:
      id: "onboarding-your-plan-screen"
    timeout: 5000

- tapOn:
    id: "onboarding-start-tracking"

# Dismiss edit tooltip modal (blocks home-screen testID on Android)
- tapOn:
    text: "Got it!"
    optional: true

# Verify Home
- extendedWaitUntil:
    visible:
      id: "home-screen"
    timeout: 15000
