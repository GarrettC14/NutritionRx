# Restaurant Search E2E Test
# Tests searching for restaurants and foods within restaurants
#
# Usage: maestro test .maestro/restaurant/restaurant-search.yaml

appId: com.nutritionrx.app

---
# Restaurant search flow
- launchApp:
    clearState: true

- waitForAnimationToEnd

# Skip onboarding if present
- tapOn:
    text: "Skip"
    optional: true

- tapOn:
    text: "Maybe Later"
    optional: true

- waitForAnimationToEnd

# Navigate to Add Food
- tapOn:
    id: "add-food-tab"
    optional: true

- tapOn:
    text: "Add Food"
    optional: true

- waitForAnimationToEnd

# Open restaurants
- tapOn:
    text: "Browse Restaurants"

- waitForAnimationToEnd

# Test: Search for restaurant by name
- tapOn:
    text: "Search restaurants..."

- inputText: "chipotle"

- waitForAnimationToEnd

# Verify search results show Chipotle
- assertVisible:
    text: "Chipotle"
    optional: true

# Clear search
- tapOn:
    id: "clear-search"
    optional: true

# Test: Search with partial name
- inputText: "star"

- waitForAnimationToEnd

# Should show Starbucks
- assertVisible:
    text: "Starbucks"
    optional: true

# Clear search and go back to full list
- tapOn:
    id: "clear-search"
    optional: true

- waitForAnimationToEnd

# Navigate to a restaurant
- tapOn:
    text: "McDonald's"
    optional: true

- waitForAnimationToEnd

# Test: Search within restaurant menu
- tapOn:
    text: "Search McDonald's..."
    optional: true

- inputText: "chicken"

- waitForAnimationToEnd

# Should show chicken items
- assertVisible:
    text: "McChicken"
    optional: true

# Clear and navigate back
- tapOn:
    id: "clear-search"
    optional: true

- tapOn:
    id: "back-button"
    optional: true

- swipe:
    direction: RIGHT
    optional: true

- waitForAnimationToEnd

# Verify back on restaurant list
- assertVisible:
    text: "Restaurants"
