# Restaurant Food Logging E2E Test
# Tests the complete flow of logging a food item from a restaurant
#
# Usage: maestro test .maestro/restaurant/food-logging.yaml

appId: com.nutritionrx.app

---
# Log restaurant food flow
- launchApp:
    clearState: true

- waitForAnimationToEnd

# Skip onboarding if present
- tapOn:
    text: "Skip"
    optional: true

- tapOn:
    text: "Maybe Later"
    optional: true

- waitForAnimationToEnd

# Navigate to Add Food
- tapOn:
    id: "add-food-tab"
    optional: true

- tapOn:
    text: "Add Food"
    optional: true

- waitForAnimationToEnd

# Open restaurants
- tapOn:
    text: "Browse Restaurants"

- waitForAnimationToEnd

# Select first restaurant
- tapOn:
    text: "McDonald's"
    optional: true

- tapOn:
    index: 0
    optional: true

- waitForAnimationToEnd

# Select first food item
- tapOn:
    text: "Big Mac"
    optional: true

- tapOn:
    index: 0
    optional: true

- waitForAnimationToEnd

# Verify food detail screen
- assertVisible:
    text: "HOW MANY?"
    optional: true

# Verify default quantity is 1
- assertVisible:
    text: "1"
    optional: true

# Verify nutrition preview
- assertVisible:
    text: "calories"
    optional: true

# Verify macros displayed
- assertVisible:
    text: "P:"
    optional: true

- assertVisible:
    text: "C:"
    optional: true

- assertVisible:
    text: "F:"
    optional: true

# Verify meal type selector
- assertVisible:
    text: "MEAL"
    optional: true

- assertVisible:
    text: "Lunch"
    optional: true

# Select a meal type
- tapOn:
    text: "Dinner"
    optional: true

# Verify customizations section
- assertVisible:
    text: "CUSTOMIZATIONS"
    optional: true

# Add customization note
- tapOn:
    text: "no sauce"
    optional: true

- inputText: "no pickles"
    optional: true

# Tap Add Food button
- tapOn:
    text: "Add Food"

- waitForAnimationToEnd

# Should navigate back after successful log
# Verify we're on the food search screen or home
- assertNotVisible:
    text: "HOW MANY?"
    optional: true
