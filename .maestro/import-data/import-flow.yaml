# CSV Import Flow E2E Test Suite
# Tests the complete import data flow
#
# Usage: maestro test .maestro/import-data/import-flow.yaml

appId: com.nutritionrx.app

---
# Full import data flow test
- launchApp:
    clearState: true

- waitForAnimationToEnd

# Skip onboarding if present
- tapOn:
    text: "Skip"
    optional: true

- waitForAnimationToEnd

# Navigate to Settings
- tapOn:
    id: "settings-tab"

- waitForAnimationToEnd

# Scroll to DATA section
- scroll:
    direction: DOWN

# Verify Import Data option is visible
- assertVisible:
    text: "Import Data"

- assertVisible:
    text: "Migrate from other apps"

# Tap to open Import Data flow
- tapOn:
    text: "Import Data"

- waitForAnimationToEnd

# Verify Welcome screen content
- assertVisible:
    text: "Import Your Data"

- assertVisible:
    text: "Bring your nutrition history"

# Verify Get Started button
- assertVisible:
    text: "Get Started"

# Continue to source selection
- tapOn:
    text: "Get Started"

- waitForAnimationToEnd

# Verify Source selection screen
- assertVisible:
    text: "Select Source"

# Verify all three sources are shown
- assertVisible:
    text: "MyFitnessPal"

- assertVisible:
    text: "Cronometer"

- assertVisible:
    text: "Lose It!"

# Navigate back
- back

- waitForAnimationToEnd

# Verify we're back on welcome screen
- assertVisible:
    text: "Import Your Data"

# Navigate back to settings
- back

- waitForAnimationToEnd

# Verify we're back on main settings
- assertVisible:
    text: "Settings"
