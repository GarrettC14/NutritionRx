# Voice Assistant Deep Link E2E Test
# Tests deep link handling for voice commands
#
# Note: Deep links are typically triggered by Siri or Google Assistant
# This test verifies the app can handle the deep link format

appId: com.nutritionrx.app

---
# Deep Link Format Verification Test
- launchApp:
    clearState: true

- waitForAnimationToEnd

# Skip onboarding if present
- tapOn:
    text: "Skip"
    optional: true

- waitForAnimationToEnd

# Navigate to Home/Diary to verify app is functional
- tapOn:
    id: "diary-tab"
    optional: true

- waitForAnimationToEnd

# Verify main diary screen is visible
- assertVisible:
    text: "Today"
    optional: true

# The following deep links should be supported:
# nutritionrx://water/add?waterAmount=1
# nutritionrx://quickadd?calories=400&meal=lunch
# nutritionrx://query/calories
# nutritionrx://query/macros?queryType=protein
# nutritionrx://weight/log?weight=175&unit=pounds

# Verify the app is in a state that can receive deep links
# (App should be running and responsive)

# Navigate to settings to verify voice integration
- tapOn:
    id: "settings-tab"

- waitForAnimationToEnd

- assertVisible:
    text: "Settings"

# Scroll to find data/integrations section
- scroll:
    direction: DOWN

# Voice assistant settings should be accessible
- assertVisible:
    text: "Voice Assistant"
    optional: true
